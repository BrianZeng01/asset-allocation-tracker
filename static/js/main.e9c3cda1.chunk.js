(this["webpackJsonpasset-allocation-tracker"]=this["webpackJsonpasset-allocation-tracker"]||[]).push([[0],{157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var r=a(0),l=a.n(r),n=a(49),c=a.n(n),o=a(4),s=a(5),u=a(7),i=a(6),m=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return(e=t.call.apply(t,[this].concat(l))).array=function(e){for(var t=[],a=1;a<=e;a++)t.push(a);return t},e.toggleReallocate=function(){var t=document.getElementsByClassName("toggle");if("true"===e.props.reallocate)for(var a=0;a<t.length;a++)t[a].style.display="inline",t[a].required=!0;else for(var r=0;r<t.length;r++)t[r].style.display="none",t[r].required=!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.toggleReallocate()}},{key:"componentDidUpdate",value:function(){this.toggleReallocate()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"inputs"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ticker"),l.a.createElement("th",null,"Shares"),l.a.createElement("th",null,"Price"),"true"===this.props.reallocate?l.a.createElement("th",null,"Target Percentage"):null),this.array(this.props.counter).map((function(e,t){return l.a.createElement("tr",{className:"input".concat(t),key:t},l.a.createElement("td",null,l.a.createElement("input",{id:"ticker"+e,type:"text",required:!0,placeholder:"APPL"})),l.a.createElement("td",null,l.a.createElement("input",{id:"shares"+e,type:"number",required:!0,placeholder:"30"})),l.a.createElement("td",null,l.a.createElement("input",{id:"price"+e,type:"text",required:!0,placeholder:"150"})),l.a.createElement("td",null,l.a.createElement("input",{className:"toggle",id:"target"+e,type:"number",required:!0,placeholder:"10"})))}))))))}}]),a}(r.Component),d=a(32),p=a.n(d),h=a(50),E=a(19),g=a(18),f=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).changeDisplay=function(){"percentage"===r.state.display?r.setState({display:"value"}):r.setState({display:"percentage"})},r.changeSort=function(){"numerically"===r.state.sortBy?r.setState({sortBy:"alphabetically"}):r.setState({sortBy:"numerically"})},r.selectColor=function(e,t){return t<1&&(t=1),"hsl("+(120+e*(360/t))%360+",100%,70%)"},r.pieChart=function(e){var t=[];return e.forEach((function(e,a){e.splice(-1,1,r.selectColor(a,20)),t.push({title:e[0],value:e[e.length-2],color:r.selectColor(a,20)})})),l.a.createElement("div",{className:"pieChart"},l.a.createElement("div",{className:"pieChartContent"},l.a.createElement("div",{className:"chart"},l.a.createElement(E.PieChart,{className:"piechart",data:t,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},animate:!0,segmentsShift:.75,center:[55,55],viewBoxSize:[110,110]})),l.a.createElement("div",{className:"chartColors"},e.map((function(e,t){return l.a.createElement("div",{className:"color",key:t},l.a.createElement("div",{className:"square",style:{backgroundColor:e[e.length-1]}}),e[0])})))))},r.barChart=function(e,t,a){var r=[],n=[];"numerically"===a?e.sort((function(e,t){return t[1]-e[1]})):e.sort(),e.forEach((function(e){r.push(e[0]),n.push(e["percentage"===t?e.length-2:1])})),n.push(0);var c={labels:r,datasets:[{label:"percentage"===t?"Percentage":"Value",backgroundColor:"#1F77AC",borderColor:"#213458",borderWidth:3,data:n}]};return l.a.createElement(g.Bar,{className:"bar",height:350,data:c,options:{title:{display:!0,text:"percentage"===t?"Percentage of Portfolio":"Asset Values"},maintainAspectRatio:!1,legend:{display:!1}}})},r.table=function(e,t,a){var r=0;return"numerically"===a?e.sort((function(e,t){return t[1]-e[1]})):e.sort(),e.forEach((function(e){r+=e[1]})),l.a.createElement("div",{className:"table"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ticker"),l.a.createElement("th",null,"Value"),l.a.createElement("th",null,"Shares"),"reallocated"===t?l.a.createElement("th",null,"Buy/Sell"):null,l.a.createElement("th",null,"Percentage")),e.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,e[0]),l.a.createElement("td",null,e[1]),l.a.createElement("td",null,e[2]),l.a.createElement("td",null,e[3]),"reallocated"===t?l.a.createElement("td",null,e[4]):null)})))),l.a.createElement("h3",null,"Total Value = ",r))},r.state={display:"percentage",sortBy:"numerically"},r}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.table(this.props.dataArray,this.props.type,this.state.sortBy),this.pieChart(this.props.dataArray),l.a.createElement("div",{className:"barChart"},this.barChart(this.props.dataArray,this.state.display,this.state.sortBy)),l.a.createElement("div",{className:"view"},l.a.createElement("button",{onClick:this.changeDisplay},"percentage"===this.state.display?"View Value":"View Percentages"),l.a.createElement("button",{onClick:this.changeSort},"alphabetically"===this.state.sortBy?"Sort Numerically":"Sort Alphabetically")))}}]),a}(r.Component),v=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).recalculate=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.calculateCurrent();case 2:t=document.getElementById("reallocatedAssets"),"true"===r.props.reallocate?(r.calculateNew(),r.props.data[0].length>=4&&(t.style.display="grid")):t.style.display="none";case 4:case"end":return e.stop()}}),e)}))),r.calculateCurrent=function(){var e=r.props.data,t=0,a=[];e.forEach((function(e){var r=+(e[1]*e[2]).toFixed(2);a.push([e[0],r,e[1]]),t+=e[1]*e[2]})),a.forEach((function(e){e.push(Math.round(100*(e[1]/t*100+Number.EPSILON))/100),e.push("none")})),r.setState({currentAssets:a}),r.setState({totalValue:t})},r.calculateNew=function(){var e=r.props.data,t=0,a=[];e.forEach((function(e){var l=e[0],n=Math.floor(e[3]/100*r.state.totalValue/e[2]),c=n-e[1],o=+(n*e[2]).toFixed(2);t+=o,a.push([l,o,n,c])}));var l=Math.round(100*(r.state.totalValue-t)+Number.EPSILON)/100;a.push(["CASH",l,0,0]),a.forEach((function(e){e.push(Math.round(100*(e[1]/r.state.totalValue*100+Number.EPSILON))/100),e.push("none")})),r.setState({reallocatedAssets:a})},r.state={currentAssets:[],reallocatedAssets:[]},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("mounting");for(var e=0;e<this.props.data.length;e++){var t=this.props.data[e];document.getElementById("ticker"+(e+1)).value=t[0],document.getElementById("shares"+(e+1)).value=t[1],document.getElementById("price"+(e+1)).value=t[2],t.length>3&&(document.getElementById("target"+(e+1)).value=t[3])}this.recalculate()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&(this.recalculate(),console.log("recalculated in didupdate"),e.reallocate,this.props.reallocate)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"calculations"},l.a.createElement("div",{className:"currentAssets"},l.a.createElement("h1",null,"Current Allocation"),l.a.createElement(f,{dataArray:this.state.currentAssets,type:"current"})),l.a.createElement("div",{id:"reallocatedAssets",className:"reallocatedAssets"},l.a.createElement("h1",null,"New Allocation"),l.a.createElement(f,{dataArray:this.state.reallocatedAssets,type:"reallocated"}))))}}]),a}(r.Component),y=a(20),b=a.n(y),N=a(21),S=a.n(N),k=(r.Component,a(51)),C=a(1),A=function(e){var t=e.addAsset,a=e.testValues,r=e.clearHandler,n=e.reallocateHandler,c=e.reallocateMode;return l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{onClick:t},"Add Asset"),l.a.createElement("button",{onClick:n},"true"===c?"Current Allocation Only":"Reallocate Assets"),l.a.createElement("button",{onClick:r},"Clear"),l.a.createElement("button",{onClick:a},"Use Test Values"))},O=function(e){var t=e.collectInputs,a=e.deleteInput,r=e.inputs,n=e.reallocateMode,c={margin:0,cursor:"pointer"};l.a.useEffect((function(){o()}),[n,r]);var o=function(){var e=document.querySelectorAll(".toggle");if("true"===n)for(var t=0;t<r.length;t++)e[t].style.display="inline",e[t].required=!0;else for(var a=0;a<r.length;a++)e[a].style.display="none",e[a].required=!1};return l.a.createElement("form",{action:"#",onSubmit:function(e){e.preventDefault(),t()}},r.length>0?l.a.createElement("div",{className:"inputs"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ticker"),l.a.createElement("th",null,"Shares"),l.a.createElement("th",null,"Price"),"true"===n?l.a.createElement("th",null,"Target Percentage"):null),r.map((function(e){return l.a.createElement("tr",{className:"asset".concat(e.id," input"),key:e.id},l.a.createElement("td",null,l.a.createElement("input",{id:"ticker"+e.id,type:"text",required:!0,placeholder:"APPL",defaultValue:e.ticker})),l.a.createElement("td",null,l.a.createElement("input",{id:"shares"+e.id,type:"number",required:!0,placeholder:"30",defaultValue:e.shares})),l.a.createElement("td",null,l.a.createElement("input",{id:"price"+e.id,type:"text",required:!0,placeholder:"150",defaultValue:e.price})),l.a.createElement("td",null,l.a.createElement("input",{className:"toggle",style:"true"===n?{display:"inline"}:{display:"none"},id:"target"+e.id,type:"text",required:!0,placeholder:"10",defaultValue:e.targetPercentage})),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return a(e.id)},style:c},"X")))})))),l.a.createElement("h4",null,"Note: Sum of Target Percentage under 100 will allocate remaining percentage to cash ",l.a.createElement("br",null),'If cash included in assets name Ticker = "CASH", Price = 1, and Shares = amount'),l.a.createElement("button",{type:"submit",className:"calculate"},"Calculate"),l.a.createElement("div",{id:"error"})):null)},P=function(e){var t=e.assets,a=e.type,n=Object(r.useState)("value"),c=Object(C.a)(n,2),o=c[0],s=c[1],u=Object(r.useState)("alphabetically"),i=Object(C.a)(u,2),m=i[0],d=i[1];return l.a.createElement(l.a.Fragment,null,function(e,t,a){var r=0;return"numerically"===a?e.sort((function(e,t){return t.value-e.value})):e.sort(),e.forEach((function(e){r+=e.value})),l.a.createElement("div",{className:"table"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Ticker"),l.a.createElement("th",null,"Value"),l.a.createElement("th",null,"Shares"),l.a.createElement("th",null,"Price"),l.a.createElement("th",null,"Percentage"),"reallocated"===t?l.a.createElement("th",null,"Buy/Sell"):null),e.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.ticker),l.a.createElement("td",null,e.value),l.a.createElement("td",null,e.shares),l.a.createElement("td",null,e.price),l.a.createElement("td",null,e.percentage),"reallocated"===t?l.a.createElement("td",null,e.change):null)})))),l.a.createElement("h3",null,"Total Value = ",r))}(t,a,m),function(e){var t=[];return e.forEach((function(e,a){var r,l;t.push({title:e.ticker,value:e.value,color:(r=2*a,l=20,l<1&&(l=1),"hsl("+(120+r*(360/l))%360+",100%,70%)")})})),l.a.createElement("div",{className:"pieChart"},l.a.createElement("div",{className:"pieChartContent"},l.a.createElement("div",{className:"chart"},l.a.createElement(E.PieChart,{className:"piechart",data:t,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},animate:!0,segmentsShift:.75,center:[55,55],viewBoxSize:[110,110]})),l.a.createElement("div",{className:"chartColors"},t.map((function(e,t){return l.a.createElement("div",{className:"color",key:t},l.a.createElement("div",{className:"square",style:{backgroundColor:e.color}}),e.title)})))))}(t),l.a.createElement("div",{className:"barChart"},function(e,t,a){var r=[],n=[];"numerically"===a?e.sort((function(e,t){return t.value-e.value})):e.sort((function(e,t){return e.ticker.localeCompare(t.ticker)})),e.forEach((function(e){r.push(e.ticker),n.push("percentage"===t?e.percentage:e.value)})),n.push(0);var c={labels:r,datasets:[{label:"percentage"===t?"Percentage":"Value",backgroundColor:"#1F77AC",borderColor:"#213458",borderWidth:3,data:n}]};return l.a.createElement(g.Bar,{className:"bar",height:350,data:c,options:{title:{display:!0,text:"percentage"===t?"Percentage of Portfolio":"Asset Values"},maintainAspectRatio:!1,legend:{display:!1}}})}(t,o,m)),l.a.createElement("div",{className:"view"},l.a.createElement("button",{onClick:function(){s("percentage"===o?"value":"percentage")}},"percentage"===o?"View Value":"View Percentages"),l.a.createElement("button",{onClick:function(){d("numerically"===m?"alphabetically":"numerically")}},"alphabetically"===m?"Sort Numerically":"Sort Alphabetically")))},j=function(e){var t=e.inputs,a=e.reallocateMode,n=Object(r.useState)([]),c=Object(C.a)(n,2),o=c[0],s=c[1],u=Object(r.useState)([]),i=Object(C.a)(u,2),m=i[0],d=i[1],p=Object(r.useState)(0),h=Object(C.a)(p,2),E=h[0],g=h[1];l.a.useEffect((function(){f()}),[t,E]);var f=function(){v();var e=document.querySelector("#reallocatedAssets");"true"===a?(y(),e.style.display="grid"):e.style.display="none"},v=function(){var e=0,a=[];t.forEach((function(t){var r=parseFloat((t.shares*t.price).toFixed(2));a.push({ticker:t.ticker,value:r,shares:t.shares,price:t.price}),e+=r})),a.forEach((function(t){t.percentage=Math.round(100*(t.value/e*100+Number.EPSILON))/100})),s(a),g(e),console.log("current allocation calculated")},y=function(){var e,a=0,r=[],l=!1;t.forEach((function(t){var n=Math.floor(t.targetPercentage/100*E/t.price),c=n-t.shares,o=parseFloat((n*t.price).toFixed(2)),s=Math.round(100*(o/E*100+Number.EPSILON))/100;a+=o;var u={ticker:t.ticker,value:o,shares:n,price:t.price,percentage:s,change:c};r.push(u),"cash"==t.ticker.toLowerCase()&&(l=!0,u.change=0,e=u)}));var n=Math.round(100*(E-a)+Number.EPSILON)/100,c=Math.round(100*(n/E*100+Number.EPSILON))/100;l?(e.value=e.value+n,e.value=e.shares+n,e.percentage=e.percentage+c):r.push({ticker:"CASH",value:n,shares:n,price:1,percentage:c,change:0}),d(r),console.log("new allocation calculated")};return l.a.createElement("div",{className:"calculations"},l.a.createElement("div",{className:"currentAssets"},l.a.createElement("h1",null,"Current Allocation"),l.a.createElement(P,{assets:o,type:"current"})),l.a.createElement("div",{id:"reallocatedAssets",className:"reallocatedAssets"},l.a.createElement("h1",null,"New Allocation"),l.a.createElement(P,{assets:m,type:"reallocated"})))},I=function(){var e=Object(r.useState)(localStorage.getItem("reallocateMode")||"true"),t=Object(C.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(localStorage.getItem("displayCalculations")||"false"),o=Object(C.a)(c,2),s=o[0],u=o[1],i=Object(r.useState)(JSON.parse(localStorage.getItem("inputs"))||[]),m=Object(C.a)(i,2),d=m[0],p=m[1],h=Object(r.useState)(JSON.parse(localStorage.getItem("calculations"))||[]),E=Object(C.a)(h,2),g=E[0],f=E[1];l.a.useEffect((function(){localStorage.setItem("reallocateMode",a),localStorage.setItem("inputs",JSON.stringify(d)),localStorage.setItem("calculations",JSON.stringify(g)),localStorage.setItem("displayCalculations",s)}),[d,a,s,g]);var v=function(e){f(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"assets"},l.a.createElement("h1",null,"Portfolio Allocation Tool"),l.a.createElement(A,{addAsset:function(){console.log("added asset");var e={id:d.length>0?d[d.length-1].id+1:0,ticker:"",shares:"",price:"",targetPercentage:""};p([].concat(Object(k.a)(d),[e]))},testValues:function(){p([{id:0,ticker:"AMD",shares:100,price:75,targetPercentage:10},{id:1,ticker:"APPL",shares:30,price:150,targetPercentage:10},{id:2,ticker:"VFV",shares:130,price:70,targetPercentage:30},{id:3,ticker:"GOOG",shares:10,price:400,targetPercentage:5},{id:4,ticker:"FB",shares:20,price:250,targetPercentage:10},{id:5,ticker:"BTC",shares:40,price:250,targetPercentage:5},{id:6,ticker:"VGRO",shares:130,price:20,targetPercentage:15},{id:7,ticker:"TD",shares:40,price:80,targetPercentage:10},{id:8,ticker:"BYND",shares:30,price:200,targetPercentage:5}]),console.log("Test values being used")},clearHandler:function(){p([]),f([]),u("false"),console.log("Assets Cleared")},reallocateHandler:function(){n("true"===a?"false":"true"),console.log("reallocate Handled")},reallocateMode:a}),l.a.createElement(O,{collectInputs:function(){var e=document.querySelectorAll(".input"),t=[],r=0;if(e.forEach((function(e,a){var l=e.querySelectorAll("input"),n=a,c=l[0].value,o=l[1].value,s=parseFloat(l[2].value).toFixed(2),u=parseFloat(l[3].value).toFixed(2);t.push({id:n,ticker:c,shares:o,price:s,targetPercentage:u}),r+=u})),p(t),"true"===a&&r>100)return document.querySelector("#error").innerHTML='<h2 class="errormsg">Sum of Target Percentages must not exceed 100%</h2>',void setTimeout((function(){document.querySelector(".errormsg").remove()}),3e3);v(t),u("true")},deleteInput:function(e){p(d.filter((function(t){return t.id!==e}))),console.log("input ".concat(e," deleted"))},inputs:d,reallocateMode:a})),"true"===s?l.a.createElement(j,{inputs:g,reallocateMode:a}):l.a.createElement("div",{className:"demoImages"},l.a.createElement("h2",null,"Demo View"),l.a.createElement("div",null,l.a.createElement("img",{alt:"demoImage",src:b.a}),l.a.createElement("img",{alt:"demoImage",src:S.a}))))};a(157);var V=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,a){e.exports=a.p+"static/media/currentAllocationDemo.cebaf131.png"},21:function(e,t,a){e.exports=a.p+"static/media/newAllocationDemo.b142bd2b.png"},52:function(e,t,a){e.exports=a(158)}},[[52,1,2]]]);
//# sourceMappingURL=main.e9c3cda1.chunk.js.map