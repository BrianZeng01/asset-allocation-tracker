(this["webpackJsonpasset-allocation-tracker"]=this["webpackJsonpasset-allocation-tracker"]||[]).push([[0],{154:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var l=a(0),r=a.n(l),n=a(42),c=a.n(n),o=a(3),s=a(4),u=a(6),i=a(5),m=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).array=function(e){for(var t=[],a=1;a<=e;a++)t.push(a);return t},e.toggleReallocate=function(){var t=document.getElementsByClassName("toggle");if("true"===e.props.reallocate)for(var a=0;a<t.length;a++)t[a].style.display="inline",t[a].required=!0;else for(var l=0;l<t.length;l++)t[l].style.display="none",t[l].required=!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.toggleReallocate()}},{key:"componentDidUpdate",value:function(){this.toggleReallocate()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"inputs"},this.array(this.props.counter).map((function(e,t){return r.a.createElement("div",{key:t,id:"asset"+e,className:"input"},r.a.createElement("label",{htmlFor:"ticker"+e},"Ticker"),r.a.createElement("input",{id:"ticker"+e,type:"text",required:!0,placeholder:"APPL"}),r.a.createElement("label",{htmlFor:"shares"+e},"Shares"),r.a.createElement("input",{id:"shares"+e,type:"number",required:!0,placeholder:"30"}),r.a.createElement("label",{htmlFor:"price"+e},"Price"),r.a.createElement("input",{id:"price"+e,type:"text",required:!0,placeholder:"150"}),r.a.createElement("label",{className:"toggle",htmlFor:"min"+e},"Target Percentage"),r.a.createElement("input",{className:"toggle",id:"target"+e,type:"number",required:!0,placeholder:"10"}))}))))}}]),a}(l.Component),d=a(25),h=a.n(d),p=a(43),g=a(45),E=(a(54),a(44)),f=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(o.a)(this,a),(l=t.call(this,e)).changeDisplay=function(){"percentage"===l.state.display?l.setState({display:"value"}):l.setState({display:"percentage"})},l.changeSort=function(){"numerically"===l.state.sortBy?l.setState({sortBy:"alphabetically"}):l.setState({sortBy:"numerically"})},l.selectColor=function(e,t){return t<1&&(t=1),"hsl("+(120+e*(360/t))%360+",100%,70%)"},l.pieChart=function(e){var t=[];return e.forEach((function(e,a){e.splice(-1,1,l.selectColor(a,20)),t.push({title:e[0],value:e[e.length-2],color:l.selectColor(a,20)})})),r.a.createElement("div",{className:"pieChart"},r.a.createElement("div",{className:"pieChartContent"},r.a.createElement("div",{className:"chart"},r.a.createElement(g.PieChart,{className:"piechart",data:t,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},animate:!0,segmentsShift:.75,center:[55,55],viewBoxSize:[110,110]})),r.a.createElement("div",{className:"chartColors"},e.map((function(e,t){return r.a.createElement("div",{className:"color",key:t},r.a.createElement("div",{className:"square",style:{backgroundColor:e[e.length-1]}}),e[0])})))))},l.barChart=function(e,t,a){var l=[],n=[];"numerically"===a?e.sort((function(e,t){return t[1]-e[1]})):e.sort(),e.forEach((function(e){l.push(e[0]),n.push(e["percentage"===t?e.length-2:1])})),n.push(0);var c={labels:l,datasets:[{label:"percentage"===t?"Percentage":"Value",backgroundColor:"#1F77AC",borderColor:"#213458",borderWidth:3,data:n}]};return r.a.createElement(E.Bar,{className:"bar",height:350,data:c,options:{title:{display:!0,text:"percentage"===t?"Percentage of Portfolio":"Asset Values"},maintainAspectRatio:!1,legend:{display:!1}}})},l.table=function(e,t){var a=0;return e.forEach((function(e){a+=e[1]})),r.a.createElement("div",{className:"table"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticker"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Shares"),"reallocated"===t?r.a.createElement("th",null,"Buy/Sell"):null,r.a.createElement("th",null,"Percentage")),e.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]),r.a.createElement("td",null,e[2]),r.a.createElement("td",null,e[3]),"reallocated"===t?r.a.createElement("td",null,e[4]):null)})))),r.a.createElement("h3",null,"Total Value = ",a))},l.state={display:"percentage",sortBy:"numerically"},l}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.table(this.props.dataArray,this.props.type),this.pieChart(this.props.dataArray),r.a.createElement("div",{className:"barChart"},this.barChart(this.props.dataArray,this.state.display,this.state.sortBy)),r.a.createElement("div",{className:"view"},r.a.createElement("button",{onClick:this.changeDisplay},"percentage"===this.state.display?"View Value":"View Percentages"),r.a.createElement("button",{onClick:this.changeSort},"alphabetically"===this.state.sortBy?"Sort Numerically":"Sort Alphabetically")))}}]),a}(l.Component),v=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(o.a)(this,a),(l=t.call(this,e)).recalculate=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.calculateCurrent();case 2:t=document.getElementById("reallocatedAssets"),"true"===l.props.reallocate?(l.calculateNew(),l.props.data[0].length>=4&&(t.style.display="grid")):t.style.display="none";case 4:case"end":return e.stop()}}),e)}))),l.calculateCurrent=function(){var e=l.props.data,t=0,a=[];e.forEach((function(e){var l=+(e[1]*e[2]).toFixed(2);a.push([e[0],l,e[1]]),t+=e[1]*e[2]})),a.forEach((function(e){e.push(Math.round(100*(e[1]/t*100+Number.EPSILON))/100),e.push("none")})),l.setState({currentAssets:a}),l.setState({totalValue:t})},l.calculateNew=function(){var e=l.props.data,t=0,a=[];e.forEach((function(e){var r=e[0],n=Math.floor(e[3]/100*l.state.totalValue/e[2]),c=n-e[1],o=+(n*e[2]).toFixed(2);t+=o,a.push([r,o,n,c])}));var r=Math.round(100*(l.state.totalValue-t)+Number.EPSILON)/100;a.push(["CASH",r,0,0]),a.forEach((function(e){e.push(Math.round(100*(e[1]/l.state.totalValue*100+Number.EPSILON))/100),e.push("none")})),l.setState({reallocatedAssets:a})},l.state={currentAssets:[],reallocatedAssets:[]},l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("mounting");for(var e=0;e<this.props.data.length;e++){var t=this.props.data[e];document.getElementById("ticker"+(e+1)).value=t[0],document.getElementById("shares"+(e+1)).value=t[1],document.getElementById("price"+(e+1)).value=t[2],t.length>3&&(document.getElementById("target"+(e+1)).value=t[3])}this.recalculate()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&(this.recalculate(),console.log("recalculated in didupdate"),e.reallocate,this.props.reallocate)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"calculations"},r.a.createElement("div",{className:"currentAssets"},r.a.createElement("h1",null,"Current Allocation"),r.a.createElement(f,{dataArray:this.state.currentAssets,type:"current"})),r.a.createElement("div",{id:"reallocatedAssets",className:"reallocatedAssets"},r.a.createElement("h1",null,"New Allocation"),r.a.createElement(f,{dataArray:this.state.reallocatedAssets,type:"reallocated"}))))}}]),a}(l.Component),y=a(46),b=a.n(y),S=a(47),N=a.n(S),I=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).addAsset=function(){localStorage.setItem("counter",parseInt(localStorage.getItem("counter"))+1),e.setState({counter:parseInt(localStorage.getItem("counter"))})},e.removeAsset=function(){e.state.counter>1&&(localStorage.setItem("counter",parseInt(localStorage.getItem("counter"))-1),e.setState({counter:localStorage.getItem("counter")}))},e.calculate=function(){for(var t=document.getElementsByClassName("input"),a=[],l=0,r=0;r<t.length;r++){var n,c=[],o=t[r].getElementsByTagName("input");if("true"===e.state.reallocate?(n=4,l+=parseInt(o[3].value)):n=3,l>100)return document.getElementById("error").innerHTML="Sum of Target Percentages must not exceed 100%",!1;for(var s=0;s<n;s++){var u=o[s].value;"number"===typeof u?c.push(Math.round(100*(100*u+Number.EPSILON)/100)):c.push(u)}a.push(c)}a.sort(),e.setState({calculations:a}),localStorage.setItem("calculations",JSON.stringify(a)),console.log(a),console.log("submitted")},e.state={},localStorage.getItem("counter")?e.state.counter=parseInt(localStorage.getItem("counter")):(e.state.counter=1,localStorage.setItem("counter",1)),localStorage.getItem("reallocate")?e.state.reallocate=localStorage.getItem("reallocate"):(e.state.reallocate="true",localStorage.setItem("reallocate","true")),localStorage.getItem("calculations")?e.state.calculations=JSON.parse(localStorage.getItem("calculations")):e.state.calculations=[],e}return Object(s.a)(a,[{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"assets"},r.a.createElement("h1",null,"Portfolio Allocation Tool"),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:this.addAsset},"Add Asset"),r.a.createElement("button",{onClick:this.removeAsset},"Remove Last Asset"),r.a.createElement("button",{onClick:function(){localStorage.setItem("reallocate","true"===localStorage.getItem("reallocate")?"false":"true"),e.setState({reallocate:localStorage.getItem("reallocate")})}},"true"===this.state.reallocate?"Current Allocation Only":"Reallocate Assets"),r.a.createElement("button",{onClick:function(){localStorage.clear(),window.location.reload()}},"Clear")),r.a.createElement("form",{action:"#",onSubmit:function(){e.calculate()}},r.a.createElement(m,{counter:this.state.counter,reallocate:this.state.reallocate}),r.a.createElement("h4",null,"Note: Sum of Target Percentage under 100 will allocate remaining percentage to cash"),r.a.createElement("button",{type:"submit",className:"calculate"},"Calculate"),r.a.createElement("div",{id:"error"}))),this.state.calculations.length>=1?r.a.createElement(v,{data:this.state.calculations,reallocate:this.state.reallocate}):r.a.createElement("div",{className:"demoImages"},r.a.createElement("h2",null,"Demo View"),r.a.createElement("div",null,r.a.createElement("img",{alt:"demoImage",src:b.a}),r.a.createElement("img",{alt:"demoImage",src:N.a}))))}}]),a}(l.Component);a(154);var A=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e,t,a){e.exports=a.p+"static/media/currentAllocationDemo.cebaf131.png"},47:function(e,t,a){e.exports=a.p+"static/media/newAllocationDemo.b142bd2b.png"},48:function(e,t,a){e.exports=a(155)}},[[48,1,2]]]);
//# sourceMappingURL=main.79fa1da4.chunk.js.map