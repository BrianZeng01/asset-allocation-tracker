(this["webpackJsonpasset-allocation-tracker"]=this["webpackJsonpasset-allocation-tracker"]||[]).push([[0],{157:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var l=a(0),r=a.n(l),n=a(49),c=a.n(n),o=a(4),s=a(5),u=a(7),i=a(6),m=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).array=function(e){for(var t=[],a=1;a<=e;a++)t.push(a);return t},e.toggleReallocate=function(){var t=document.getElementsByClassName("toggle");if("true"===e.props.reallocate)for(var a=0;a<t.length;a++)t[a].style.display="inline",t[a].required=!0;else for(var l=0;l<t.length;l++)t[l].style.display="none",t[l].required=!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.toggleReallocate()}},{key:"componentDidUpdate",value:function(){this.toggleReallocate()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"inputs"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticker"),r.a.createElement("th",null,"Shares"),r.a.createElement("th",null,"Price"),"true"===this.props.reallocate?r.a.createElement("th",null,"Target Percentage"):null),this.array(this.props.counter).map((function(e,t){return r.a.createElement("tr",{className:"input".concat(t),key:t},r.a.createElement("td",null,r.a.createElement("input",{id:"ticker"+e,type:"text",required:!0,placeholder:"APPL"})),r.a.createElement("td",null,r.a.createElement("input",{id:"shares"+e,type:"number",required:!0,placeholder:"30"})),r.a.createElement("td",null,r.a.createElement("input",{id:"price"+e,type:"text",required:!0,placeholder:"150"})),r.a.createElement("td",null,r.a.createElement("input",{className:"toggle",id:"target"+e,type:"number",required:!0,placeholder:"10"})))}))))))}}]),a}(l.Component),d=a(32),p=a.n(d),h=a(50),g=a(19),E=a(18),f=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(o.a)(this,a),(l=t.call(this,e)).changeDisplay=function(){"percentage"===l.state.display?l.setState({display:"value"}):l.setState({display:"percentage"})},l.changeSort=function(){"numerically"===l.state.sortBy?l.setState({sortBy:"alphabetically"}):l.setState({sortBy:"numerically"})},l.selectColor=function(e,t){return t<1&&(t=1),"hsl("+(120+e*(360/t))%360+",100%,70%)"},l.pieChart=function(e){var t=[];return e.forEach((function(e,a){e.splice(-1,1,l.selectColor(a,20)),t.push({title:e[0],value:e[e.length-2],color:l.selectColor(a,20)})})),r.a.createElement("div",{className:"pieChart"},r.a.createElement("div",{className:"pieChartContent"},r.a.createElement("div",{className:"chart"},r.a.createElement(g.PieChart,{className:"piechart",data:t,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},animate:!0,segmentsShift:.75,center:[55,55],viewBoxSize:[110,110]})),r.a.createElement("div",{className:"chartColors"},e.map((function(e,t){return r.a.createElement("div",{className:"color",key:t},r.a.createElement("div",{className:"square",style:{backgroundColor:e[e.length-1]}}),e[0])})))))},l.barChart=function(e,t,a){var l=[],n=[];"numerically"===a?e.sort((function(e,t){return t[1]-e[1]})):e.sort(),e.forEach((function(e){l.push(e[0]),n.push(e["percentage"===t?e.length-2:1])})),n.push(0);var c={labels:l,datasets:[{label:"percentage"===t?"Percentage":"Value",backgroundColor:"#1F77AC",borderColor:"#213458",borderWidth:3,data:n}]};return r.a.createElement(E.Bar,{className:"bar",height:350,data:c,options:{title:{display:!0,text:"percentage"===t?"Percentage of Portfolio":"Asset Values"},maintainAspectRatio:!1,legend:{display:!1}}})},l.table=function(e,t,a){var l=0;return"numerically"===a?e.sort((function(e,t){return t[1]-e[1]})):e.sort(),e.forEach((function(e){l+=e[1]})),r.a.createElement("div",{className:"table"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticker"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Shares"),"reallocated"===t?r.a.createElement("th",null,"Buy/Sell"):null,r.a.createElement("th",null,"Percentage")),e.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]),r.a.createElement("td",null,e[2]),r.a.createElement("td",null,e[3]),"reallocated"===t?r.a.createElement("td",null,e[4]):null)})))),r.a.createElement("h3",null,"Total Value = ",l))},l.state={display:"percentage",sortBy:"numerically"},l}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.table(this.props.dataArray,this.props.type,this.state.sortBy),this.pieChart(this.props.dataArray),r.a.createElement("div",{className:"barChart"},this.barChart(this.props.dataArray,this.state.display,this.state.sortBy)),r.a.createElement("div",{className:"view"},r.a.createElement("button",{onClick:this.changeDisplay},"percentage"===this.state.display?"View Value":"View Percentages"),r.a.createElement("button",{onClick:this.changeSort},"alphabetically"===this.state.sortBy?"Sort Numerically":"Sort Alphabetically")))}}]),a}(l.Component),v=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(o.a)(this,a),(l=t.call(this,e)).recalculate=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.calculateCurrent();case 2:t=document.getElementById("reallocatedAssets"),"true"===l.props.reallocate?(l.calculateNew(),l.props.data[0].length>=4&&(t.style.display="grid")):t.style.display="none";case 4:case"end":return e.stop()}}),e)}))),l.calculateCurrent=function(){var e=l.props.data,t=0,a=[];e.forEach((function(e){var l=+(e[1]*e[2]).toFixed(2);a.push([e[0],l,e[1]]),t+=e[1]*e[2]})),a.forEach((function(e){e.push(Math.round(100*(e[1]/t*100+Number.EPSILON))/100),e.push("none")})),l.setState({currentAssets:a}),l.setState({totalValue:t})},l.calculateNew=function(){var e=l.props.data,t=0,a=[];e.forEach((function(e){var r=e[0],n=Math.floor(e[3]/100*l.state.totalValue/e[2]),c=n-e[1],o=+(n*e[2]).toFixed(2);t+=o,a.push([r,o,n,c])}));var r=Math.round(100*(l.state.totalValue-t)+Number.EPSILON)/100;a.push(["CASH",r,0,0]),a.forEach((function(e){e.push(Math.round(100*(e[1]/l.state.totalValue*100+Number.EPSILON))/100),e.push("none")})),l.setState({reallocatedAssets:a})},l.state={currentAssets:[],reallocatedAssets:[]},l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("mounting");for(var e=0;e<this.props.data.length;e++){var t=this.props.data[e];document.getElementById("ticker"+(e+1)).value=t[0],document.getElementById("shares"+(e+1)).value=t[1],document.getElementById("price"+(e+1)).value=t[2],t.length>3&&(document.getElementById("target"+(e+1)).value=t[3])}this.recalculate()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&(this.recalculate(),console.log("recalculated in didupdate"),e.reallocate,this.props.reallocate)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"calculations"},r.a.createElement("div",{className:"currentAssets"},r.a.createElement("h1",null,"Current Allocation"),r.a.createElement(f,{dataArray:this.state.currentAssets,type:"current"})),r.a.createElement("div",{id:"reallocatedAssets",className:"reallocatedAssets"},r.a.createElement("h1",null,"New Allocation"),r.a.createElement(f,{dataArray:this.state.reallocatedAssets,type:"reallocated"}))))}}]),a}(l.Component),y=a(20),b=a.n(y),N=a(21),S=a.n(N),k=(l.Component,a(51)),C=a(1),A=function(e){var t=e.addAsset,a=e.testValues,l=e.clearHandler,n=e.reallocateHandler,c=e.reallocateMode;return r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:t},"Add Asset"),r.a.createElement("button",{onClick:n},"true"===c?"Current Allocation Only":"Reallocate Assets"),r.a.createElement("button",{onClick:l},"Clear"),r.a.createElement("button",{onClick:a},"Use Test Values"))},O=function(e){var t=e.collectInputs,a=e.deleteInput,l=e.inputs,n=e.reallocateMode,c={margin:0,cursor:"pointer"};r.a.useEffect((function(){o()}),[n,l]);var o=function(){var e=document.querySelectorAll(".toggle");if("true"===n)for(var t=0;t<l.length;t++)e[t].style.display="inline",e[t].required=!0;else for(var a=0;a<l.length;a++)e[a].style.display="none",e[a].required=!1};return r.a.createElement("form",{action:"#",onSubmit:function(e){e.preventDefault(),t()}},l.length>0?r.a.createElement("div",{className:"inputs"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticker"),r.a.createElement("th",null,"Shares"),r.a.createElement("th",null,"Price"),"true"===n?r.a.createElement("th",null,"Target Percentage"):null),l.map((function(e){return r.a.createElement("tr",{className:"asset".concat(e.id," input"),key:e.id},r.a.createElement("td",null,r.a.createElement("input",{id:"ticker"+e.id,type:"text",required:!0,placeholder:"APPL",defaultValue:e.ticker})),r.a.createElement("td",null,r.a.createElement("input",{id:"shares"+e.id,type:"number",required:!0,placeholder:"30",defaultValue:e.shares})),r.a.createElement("td",null,r.a.createElement("input",{id:"price"+e.id,type:"number",required:!0,placeholder:"150",defaultValue:e.price})),r.a.createElement("td",null,r.a.createElement("input",{className:"toggle",style:"true"===n?{display:"inline"}:{display:"none"},id:"target"+e.id,type:"number",required:!0,placeholder:"10",defaultValue:e.targetPercentage})),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(e.id)},style:c},"X")))})))),r.a.createElement("h4",null,"Note: Sum of Target Percentage under 100 will allocate remaining percentage to cash"),r.a.createElement("button",{type:"submit",className:"calculate"},"Calculate"),r.a.createElement("div",{id:"error"})):null)},P=function(e){var t=e.assets,a=e.type,n=Object(l.useState)("value"),c=Object(C.a)(n,2),o=c[0],s=c[1],u=Object(l.useState)("alphabetically"),i=Object(C.a)(u,2),m=i[0],d=i[1];return r.a.createElement(r.a.Fragment,null,function(e,t,a){var l=0;return"numerically"===a?e.sort((function(e,t){return t.value-e.value})):e.sort(),e.forEach((function(e){l+=e.value})),r.a.createElement("div",{className:"table"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ticker"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Shares"),r.a.createElement("th",null,"Percentage"),"reallocated"===t?r.a.createElement("th",null,"Buy/Sell"):null),e.map((function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.ticker),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.shares),r.a.createElement("td",null,e.percentage),"reallocated"===t?r.a.createElement("td",null,e.change):null)})))),r.a.createElement("h3",null,"Total Value = ",l))}(t,a,m),function(e){var t=[];return e.forEach((function(e,a){var l,r;t.push({title:e.ticker,value:e.value,color:(l=2*a,r=20,r<1&&(r=1),"hsl("+(120+l*(360/r))%360+",100%,70%)")})})),r.a.createElement("div",{className:"pieChart"},r.a.createElement("div",{className:"pieChartContent"},r.a.createElement("div",{className:"chart"},r.a.createElement(g.PieChart,{className:"piechart",data:t,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},animate:!0,segmentsShift:.75,center:[55,55],viewBoxSize:[110,110]})),r.a.createElement("div",{className:"chartColors"},t.map((function(e,t){return r.a.createElement("div",{className:"color",key:t},r.a.createElement("div",{className:"square",style:{backgroundColor:e.color}}),e.title)})))))}(t),r.a.createElement("div",{className:"barChart"},function(e,t,a){var l=[],n=[];"numerically"===a?e.sort((function(e,t){return t.value-e.value})):e.sort((function(e,t){return e.ticker.localeCompare(t.ticker)})),e.forEach((function(e){l.push(e.ticker),n.push("percentage"===t?e.percentage:e.value)})),n.push(0);var c={labels:l,datasets:[{label:"percentage"===t?"Percentage":"Value",backgroundColor:"#1F77AC",borderColor:"#213458",borderWidth:3,data:n}]};return r.a.createElement(E.Bar,{className:"bar",height:350,data:c,options:{title:{display:!0,text:"percentage"===t?"Percentage of Portfolio":"Asset Values"},maintainAspectRatio:!1,legend:{display:!1}}})}(t,o,m)),r.a.createElement("div",{className:"view"},r.a.createElement("button",{onClick:function(){s("percentage"===o?"value":"percentage")}},"percentage"===o?"View Value":"View Percentages"),r.a.createElement("button",{onClick:function(){d("numerically"===m?"alphabetically":"numerically")}},"alphabetically"===m?"Sort Numerically":"Sort Alphabetically")))},j=function(e){var t=e.inputs,a=e.reallocateMode,n=Object(l.useState)([]),c=Object(C.a)(n,2),o=c[0],s=c[1],u=Object(l.useState)([]),i=Object(C.a)(u,2),m=i[0],d=i[1],p=Object(l.useState)(0),h=Object(C.a)(p,2),g=h[0],E=h[1];r.a.useEffect((function(){f()}),[t,g]);var f=function(){v();var e=document.querySelector("#reallocatedAssets");"true"===a?(y(),e.style.display="grid"):e.style.display="none"},v=function(){var e=0,a=[];t.forEach((function(t){var l=parseInt((t.shares*t.price).toFixed(2));a.push({ticker:t.ticker,value:l,shares:t.shares}),e+=l})),a.forEach((function(t){t.percentage=Math.round(100*(t.value/e*100+Number.EPSILON))/100})),s(a),E(e),console.log("current allocation calculated")},y=function(){var e=0,a=[];t.forEach((function(t){var l=t.ticker,r=Math.floor(t.targetPercentage/100*g/t.price),n=r-t.shares,c=parseInt((r*t.price).toFixed(2)),o=Math.round(100*(c/g*100+Number.EPSILON))/100;e+=c,a.push({ticker:l,value:c,shares:r,percentage:o,change:n})}));var l=Math.round(100*(g-e)+Number.EPSILON)/100,r=Math.round(100*(l/g*100+Number.EPSILON))/100;a.push({ticker:"CASH",value:l,shares:l,percentage:r,change:0}),d(a),console.log("new allocation calculated")};return r.a.createElement("div",{className:"calculations"},r.a.createElement("div",{className:"currentAssets"},r.a.createElement("h1",null,"Current Allocation"),r.a.createElement(P,{assets:o,type:"current"})),r.a.createElement("div",{id:"reallocatedAssets",className:"reallocatedAssets"},r.a.createElement("h1",null,"New Allocation"),r.a.createElement(P,{assets:m,type:"reallocated"})))},I=function(){var e=Object(l.useState)(localStorage.getItem("reallocateMode")||"true"),t=Object(C.a)(e,2),a=t[0],n=t[1],c=Object(l.useState)(localStorage.getItem("displayCalculations")||"false"),o=Object(C.a)(c,2),s=o[0],u=o[1],i=Object(l.useState)(JSON.parse(localStorage.getItem("inputs"))||[]),m=Object(C.a)(i,2),d=m[0],p=m[1],h=Object(l.useState)(JSON.parse(localStorage.getItem("calculations"))||[]),g=Object(C.a)(h,2),E=g[0],f=g[1];r.a.useEffect((function(){localStorage.setItem("reallocateMode",a),localStorage.setItem("inputs",JSON.stringify(d)),localStorage.setItem("calculations",JSON.stringify(E)),localStorage.setItem("displayCalculations",s)}),[d,a,s,E]);var v=function(){f(d)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"assets"},r.a.createElement("h1",null,"Portfolio Allocation Tool"),r.a.createElement(A,{addAsset:function(){console.log("added asset");var e={id:d.length>0?d[d.length-1].id+1:0,ticker:"",shares:"",price:"",targetPercentage:""};p([].concat(Object(k.a)(d),[e]))},testValues:function(){p([{id:0,ticker:"AMD",shares:100,price:75,targetPercentage:10},{id:1,ticker:"APPL",shares:30,price:150,targetPercentage:10},{id:2,ticker:"VFV",shares:130,price:70,targetPercentage:30},{id:3,ticker:"GOOG",shares:10,price:400,targetPercentage:5},{id:4,ticker:"FB",shares:20,price:250,targetPercentage:10},{id:5,ticker:"BTC",shares:40,price:250,targetPercentage:5},{id:6,ticker:"VGRO",shares:130,price:20,targetPercentage:15},{id:7,ticker:"TD",shares:40,price:80,targetPercentage:10},{id:8,ticker:"BYND",shares:30,price:200,targetPercentage:5}]),console.log("Test values being used")},clearHandler:function(){p([]),f([]),u("false"),console.log("Assets Cleared")},reallocateHandler:function(){n("true"===a?"false":"true"),console.log("reallocate Handled")},reallocateMode:a}),r.a.createElement(O,{collectInputs:function(){var e=document.querySelectorAll(".input"),t=[],l=0;if(e.forEach((function(e,a){var r=e.querySelectorAll("input"),n=a,c=r[0].value,o=r[1].value,s=r[2].value,u=parseInt(r[3].value);t.push({id:n,ticker:c,shares:o,price:s,targetPercentage:u}),l+=u})),p(t),"true"===a&&l>100)return document.querySelector("#error").innerHTML='<h2 class="errormsg">Sum of Target Percentages must not exceed 100%</h2>',void setTimeout((function(){document.querySelector(".errormsg").remove()}),3e3);v(),u("true"),console.log("Inputs saved")},deleteInput:function(e){p(d.filter((function(t){return t.id!==e}))),console.log("input ".concat(e," deleted"))},inputs:d,reallocateMode:a})),"true"===s?r.a.createElement(j,{inputs:E,reallocateMode:a}):r.a.createElement("div",{className:"demoImages"},r.a.createElement("h2",null,"Demo View"),r.a.createElement("div",null,r.a.createElement("img",{alt:"demoImage",src:b.a}),r.a.createElement("img",{alt:"demoImage",src:S.a}))))};a(157);var V=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},20:function(e,t,a){e.exports=a.p+"static/media/currentAllocationDemo.cebaf131.png"},21:function(e,t,a){e.exports=a.p+"static/media/newAllocationDemo.b142bd2b.png"},52:function(e,t,a){e.exports=a(158)}},[[52,1,2]]]);
//# sourceMappingURL=main.04f36180.chunk.js.map